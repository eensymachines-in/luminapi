<div class="container" ng-controller="schedCtrl">
    <div class="row my-5">
       <div class="col-lg-6 offset-lg-3">
           <!-- drop down used to control the selected schedule -->
            <div class="form-group">
                <div class="input-group">
                    <select class="custom-select form-select" ng-model="selectedSched" 
                        ng-options="sch.name for sch in optsSchedules"
                    ></select>
                    <div class="input-group-append">
                        <button ng-click="new_schedule()" type="button" class="btn btn-outline-info">New</button>
                    </div>
                </div>
            </div>
            <!-- details of one selected schedule -->
            <section id="section-selschedule">
                <legend>
                    {[selectedSched.title]}
                </legend>
                <p class="text-muted">{[selectedSched.desc]}</p>
                <hr>
                <!-- selecting the relay maps  -->
                <p class="text-muted" ng-if="selectedSched.primary==false">Select atleast one area for the schedule</p>

                <span ng-repeat="rm in selectedSched.lbls" 
                ng-class="{true:'bg-primary', false:'bg-secondary'}[rm.sel==true]"
                class="badge rounded-pill "
                ng-click="rm.togg()"
                >{[rm.txt]}&nbsp;</span>
                
                <br/><br>
                <time-select tm="selectedSched.on" title="Turn ON at:" desc="From this time to the OFF time, the lights will remain ON">
                </time-select>
                <time-select tm="selectedSched.off" title="Turn OFF at:" desc="From this time to the ON time, the lights will remain OFF">
                </time-select>
                <hr>
                <section ng-if="selectedSched.primary==false">
                    <!-- this section is for deleting the schedule and would be available only incases of non-primary schedules -->
                    <legend>
                        Delete schedule
                    </legend>
                    <p class="text-muted">Deleting a schedule is irreversible. Although you can always add a new one just like this one</p>
                    <span class="float-right">
                        <button type="button" 
                        class="btn btn-outline-primary"
                        ng-click="selectedSched.remove()"
                        ><i class="fas fa-trash"></i>&nbsp;Delete</button>
                    </span>
                </section>
            </section>
        </div>
    </div>
</div>